<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Odd/Even Character Bug - Advanced Text Finder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .debug-section {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border: 1px solid #ffecb5;
        }
        
        .test-words {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .char-count {
            font-family: monospace;
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            margin-left: 10px;
        }
        
        .instructions {
            background-color: #d4edda;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <div class="instructions">
        <h1>🐛 Debug: Odd/Even Character Issue</h1>
        <p><strong>Steps to reproduce the bug:</strong></p>
        <ol>
            <li>Press <code>Ctrl+Shift+M</code> to open the floating widget</li>
            <li>Open browser console to see debug messages</li>
            <li>Test these specific examples:</li>
        </ol>
    </div>

    <div class="debug-section">
        <h2>🧪 Test Cases</h2>
        <p><strong>Try typing these in the floating widget search box:</strong></p>
        <ul>
            <li><code>"manage"</code> <span class="char-count">6 chars (even)</span> - should work</li>
            <li><code>"manag"</code> <span class="char-count">5 chars (odd)</span> - reportedly broken</li>
            <li><code>"test"</code> <span class="char-count">4 chars (even)</span> - should work</li>
            <li><code>"tes"</code> <span class="char-count">3 chars (odd)</span> - test this</li>
            <li><code>"debugging"</code> <span class="char-count">9 chars (odd)</span> - test this</li>
            <li><code>"debug"</code> <span class="char-count">5 chars (odd)</span> - test this</li>
        </ul>
        
        <p><strong>What to watch for:</strong></p>
        <ul>
            <li>Console messages showing input events and search calls</li>
            <li>Whether debounce timers are firing</li>
            <li>If search results are being found but not displayed</li>
            <li>Any errors in the console</li>
        </ul>
    </div>

    <div class="test-words">
        <h2>📝 Test Content</h2>
        <p>This page contains the word <strong>manage</strong> and <strong>test</strong> multiple times.</p>
        <p>Try searching for: manage, manag, test, tes, debugging, debug</p>
        <p>Each search should find these words if the search is working correctly.</p>
        <p>The word <em>debugging</em> appears here for testing odd-character searches.</p>
        <p>The word <em>debug</em> also appears for testing.</p>
        
        <div style="display: none;">
            <p>Hidden content with manage and test words for trigger testing.</p>
        </div>
    </div>

    <div class="debug-section">
        <h2>🔍 Expected Console Output</h2>
        <p>When you type in the search box, you should see:</p>
        <pre>
⌨️ Input event fired: {value: "manag", length: 5, isOdd: true, timestamp: ...}
⏱️ Debounce timer set for 300ms
⏰ Debounce timer triggered, calling performSearch
🔍 FloatingWidget performSearch called: {searchText: "manag", length: 5, isOdd: true, isVisible: true}
🚀 Starting search with options: {matchCase: false, wholeWord: false}
📊 Search results: {...}
        </pre>
        
        <p><strong>If the bug still exists, you might see:</strong></p>
        <ul>
            <li>Input events firing but performSearch not being called</li>
            <li>performSearch being called but returning empty results</li>
            <li>Search results found but not being highlighted</li>
        </ul>
    </div>

    <script>
        // Log for debugging
        console.log('🚀 Debug test page loaded. Ready for floating widget testing.');
        console.log('📝 Test words available: manage, manag, test, tes, debugging, debug');
        
        // Add some test content dynamically
        document.addEventListener('DOMContentLoaded', () => {
            console.log('✅ DOM fully loaded, extension should be ready');
        });
    </script>
</body>
</html> 